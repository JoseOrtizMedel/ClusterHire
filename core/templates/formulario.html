{% extends 'layout3.html' %}

{% load static %}

{% block content %}
<br>

<div id="titulo">    <h1>{{ nom_oferta }}</h1>      </div>
<script>
    // Obtén el elemento h1 dentro del div con id "titulo"
    var h1Element = document.querySelector('#titulo h1');
    // Obtiene el contenido de {{ nom_oferta }}
    var nomOferta = h1Element.textContent;
    // Convierte el texto a mayúsculas
    nomOferta = nomOferta.toUpperCase();
    // Reemplaza los guiones "-" por espacios
    nomOferta = nomOferta.replace(/-/g, ' ');
    // Asigna el texto modificado de vuelta al elemento h1
    h1Element.textContent = nomOferta;
</script>

<br>

<div class="container-fluid">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <a href="{% url 'ofertas_user' %}"  class="btn btn-danger" id="boton_volver">Volver</a> <!-- Botón de retroceso -->

            <form method="POST" action="{% url 'formulario' id_oferta nom_oferta %}" id="formularioPostulacion">

                {% csrf_token %}             
                <div class="form-group-inline">
                    <label for="fecha_formulario">Fecha de postulación</label>
                    <input type="text" class="form-control" name="fecha_formulario" id="fecha_formulario" readonly />
                </div> 


                <div class="form-group"> <!-- Agregar la clase text-center para centrar el contenido -->
                    <label for="pretencion_renta">Pretención de renta</label>
                    <input type="number" class="form-control" name="pretencion_renta" id="pretencion_renta" required  placeholder="460000">
                </div>       

 
                <div class="form-group"> <!-- Centrar el contenido -->
                    <label for="info_adicional">Información adicional</label>
                    <textarea class="form-control" name="info_adicional" id="info_adicional" placeholder="¿Algo más que quieras agregar?"></textarea>
                </div>

                <div class="form-group" style="display: none;">
                    <label for="fk_id_usuario">ID de Usuario</label>
                    <input type="text" class="form-control" name="fk_id_usuario" id="fk_id_usuario" readonly value="{{ request.user.id }}">
                </div>
                
                <div class="form-group" style="display: none;">
                    <label for="fk_id_oferta">ID de Oferta</label>
                    <input type="text" class="form-control" name="fk_id_oferta" id="fk_id_oferta" readonly value="{{ id_oferta }}">
                </div>
                
                {% if message_error %}
                    <div class="alert alert-danger" role="alert">
                        {{ message_error }}
                    </div>
                {% endif %}

                <!-- Botón a la derecha con margen -->
                <div class="row">
                    <div class="col">
                        <!-- Columna vacía para empujar el botón hacia la derecha -->
                    </div>
                    <div class="col-auto">
                        <input type="submit" class="btn btn-custom" id="enviarPostulacion" value="Postular" >
                    </div>
                    
                </div>
                                        
            </form>             
        </div>
    </div>
</div>




<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.1/jquery.validate.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="{% static 'js/validacionPostulacion.js' %}"></script>
<script src="{% static 'js/fecha_actual.js' %}"></script>
{% endblock %}